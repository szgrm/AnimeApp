query GetAnimes($page: Int!) {
  Page(page: $page, perPage: 20) {
    pageInfo {
      hasNextPage
    }
    media(isAdult: false, sort: POPULARITY_DESC, format_in: [TV, MOVIE]) {
      ...AnimeSmall
    }
  }
}

query GetAnimeDetail($id: Int!) {
  Media(id: $id) {
    ...AnimeFull
  }
}

query GetCharacters($page: Int!) {
  Page(page: $page, perPage: 24) {
    pageInfo {
      hasNextPage
    }
    characters(sort: FAVOURITES_DESC) {
      ...CharacterSmall
    }
  }
}

query GetCharacterDetail($id: Int!) {
  Character(id: $id) {
    ...CharacterFull
  }
}

query SearchAnime($search: String!) {
  Page {
    media(search: $search, isAdult: false, sort: POPULARITY_DESC, format_in: [TV, MOVIE]) {
      ...AnimeSmall
    }
  }
}
query SearchCharacter($search: String!) {
  Page {
    characters(search: $search, sort: SEARCH_MATCH) {
      ...CharacterSmall
    }
  }
}

fragment AnimeSmall on Media {
  id
  coverImage {
    large
  }
  title {
    english
    romaji
  }
  genres
  description
  format
  seasonYear
}

fragment AnimeFull on Media {
  id
  coverImage {
    large
  }
  title {
    english
    native
  }
  genres
  averageScore
  description
  episodes
  characters(sort: FAVOURITES_DESC) {
    nodes {
      ...CharacterSmall
    }
  }
  seasonYear
  status
  trailer {
    site
    thumbnail
    id
  }
  format
  bannerImage
}

fragment CharacterSmall on Character {
  id
  name {
    full
  }
  image {
    large
  }
  media {
    nodes {
      title {
        english
        romaji
      }
    }
  }
}

fragment CharacterFull on Character {
  id
  name {
    full
    alternative
    alternativeSpoiler
    first
    last
    middle
    native
    userPreferred
  }
  image {
    large
  }
  age
  gender
  description
  media(sort: POPULARITY_DESC) {
    nodes {
      ...AnimeSmall
    }
  }
  dateOfBirth {
    day
    month
    year
  }
}
